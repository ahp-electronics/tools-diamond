<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>How to Design with FPGA Memories</title><link rel="Prev" href="hardware_how_to.htm" title="Previous" /><link rel="Next" href="how_to_use_dedicated_ddr_memory_support.htm" title="Next" /><link rel="StyleSheet" href="../../css/font-awesome/css/font-awesome.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/how_to.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/webworks.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/print.css" type="text/css" media="print" /><script type="text/javascript" src="../scripts/common.js"></script><script type="text/javascript" src="../scripts/page.js"></script><script type="text/javascript" src="../scripts/search-client.js"></script><script type="text/javascript" src="../scripts/unidata.js"></script><script type="text/javascript" src="../scripts/unibreak.js"></script><noscript><div id="noscript_padding"></div></noscript></head><body id="pt0xUl0_002bKQrAkoHRZ6ZbHdw" class="ww_skin_page_body" onload="Page.OnLoad('../../index.htm#page/Reference%20Guides/Hardware%20How-To/how_to_design_with_fpga_memories.htm');"><div id="ww_content_container"><header id="wwconnect_header"><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#"><i class="fa"></i></a></div><!-- was this helpful button --><!--                         --><!-- Moved breadcrumbs to bottom of the header so that the print --><!-- button would float to the right of the breadcrumbs. --><!-- PH 4June2019 --><div class="ww_skin_breadcrumbs"><a class="WebWorks_Breadcrumb_Link" href="../Strategies/strategy_settings.htm">Reference Guides</a> &gt; <a class="WebWorks_Breadcrumb_Link" href="hardware_how_to.htm#1205904">	Hardware How-To</a> &gt; How to Design with FPGA Memories</div></header><div id="page_content_container" style="background-color: White; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px"><div id="page_content"><h2 id="ww1205904" class="Heading1"><span></span>How to Design with FPGA Memories</h2><p id="ww1180891" class="BodyAfterHead"><span></span>The Lattice FPGA memory technology helps you easily create and implement a variety of memory organizations including single-port, dual-port, pseudo dual-port RAMs, ROMs, or FIFOs. You can control what FPGA resources will be employed to implement the memory as either sysMEM embedded block RAM (EBR) or distributed RAM across programmable function units (PFUs). The Diamond software helps automate the implementation of memories from design entry through to creation of a programming file.</p><p id="ww1180892" class="Body"><span></span>This How-to topic applies to all Lattice FPGA device families. For FPGA memory feature support by device family, see the <span class="Hyperlink"><a href="../../Reference%20Guides/Hardware%20How-To/how_to_design_with_fpga_memories.htm#ww1180921" title="How to Design with FPGA Memories">references</a></span> listed at the end of this topic.</p><h5 id="ww1180894" class="HeadingRunIn"><span></span>Design Flow</h5><p id="ww1180895" class="BodyAfterHead"><span></span>The following steps describe the typical flow for performing design entry, simulation, synthesis, and place and route of designs that incorporate embedded sysMEM or distributed RAM memories:</p><div id="ww1180896" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>1.	</span></span>Open Diamond and choose <span style="font-weight: bold">File &gt; New &gt; Project</span> to create a project that targets a supported device family.</div><div id="ww1180897" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>2.	</span></span>Click <span style="font-weight: bold">Tools &gt; IPexpress</span> to generate a specific configuration of a memory module using the IPexpress module generator. Distributed RAM modules are located in the <span style="font-weight: bold">Memory_Modules &gt; Distributed_RAM</span> module folder and embedded sysMEM modules are located in the <span style="font-weight: bold">Memory_Modules &gt; EBR_Components</span> folder.</div><div id="ww1180900" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>3.	</span></span>In the File List view, double click on your input HDL source file and instantiate one or more memory modules into your HDL design using Diamond’s internal Source Editor tool.</div><div id="ww1180901" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>4.	</span></span>In the File List view, right click on the Input Files folder. In the popup menu, choose <span style="font-weight: bold">Add &gt; Existing Source</span> and in the Add Design File dialog navigate to your &lt;<em class="Emphasis">module_name</em>&gt;.ipx file to import it into your Diamond project. Alternately, you may import the defining module HDL file as your project source; however, future modifications to the module requires additional steps.</div><p id="ww1180902" class="Body"><span></span>You may bypass IPexpress and directly instantiate memory library primitives into your HDL source as described below.</p><h5 id="ww1191211" class="StepIntro"><span></span>To instantiate memory library primitives into your HDL source:</h5><div id="ww1201849" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>1.	</span></span>In the Process view, double click the <span style="font-weight: bold">Translate Design </span>process to create a Pre-Map version of the design. A green check mark will indicate if your NGD file was created successfully and the Output view will report results of the run. </div><div class="ww_skin_page_overflow"><table class="NoteIndented" cellspacing="0" summary=""><caption class="NoteTitleIndented" style="caption-side: top"><div id="ww1204767" class="NoteTitleIndented">Note </div></caption><tr><td style="background-color: White; border-bottom-color: #E5E5E5; border-bottom-style: none; border-bottom-width: 1px; border-left-style: none; border-right-color: #E5E5E5; border-right-style: none; border-right-width: 0px; border-top-color: #E5E5E5; border-top-style: none; border-top-width: 1.0pt; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 4px; vertical-align: top"><div id="ww1204852" class="CellBody"><span></span>If you see a yellow triangular icon with an exclamation point, double click on the adjacent warning symbol to view the message in the Output view. Check the Error and Warning tabs in the Output view for potential issues. Generally, use this approach to investigate all warning and error messages in your design flow.</div></td></tr></table></div><div id="ww1201846" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>2.	</span></span>In the Process view, double click the <span style="font-weight: bold">Map Design</span> process to create a post-map version of the design. Click on the Reports tab in the main view and in the Process Reports folder in the Design Summary list double click Map to open the MRP file. Use the MRP report file to confirm correct parameter usage and the specific device resources utilized.</div><div id="ww1180906" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>3.	</span></span>In the Process view, double click the <span style="font-weight: bold">Place &amp; Route Design</span> process to create a post-PAR version of the design. Again, in the Process Reports folder in the Design Summary list, double click on Place &amp; Route to open the PAR report file and review the final implementation.</div><div id="ww1180907" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>4.	</span></span>You may simulate a project containing a memory module at all phases of the design flow, Functional, Post-Route Functional, or Post-Route Timing Simulation, using your third-party simulator of choice. Diamond allows you to export files for simulation. See applicable documentation in Diamond help for more information.</div><div id="ww1180908" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>5.	</span></span>You may bypass IPexpress and directly instantiate memory macros into your HDL source. For more information see the <a href="../../Reference%20Guides/FPGA%20Libraries/about_library.htm#ww1434710" title="FPGA Libraries Reference Guide">FPGA Libraries Reference Guide</a>.</div><h5 id="ww1180909" class="HeadingRunIn"><span></span>Modifying an Existing Memory Block</h5><p id="ww1180910" class="BodyAfterHead"><span></span>If a configuration or port interface needs to be modified on an existing memory module of your project, use the following guidelines to make changes:</p><h5 id="ww1180911" class="StepIntro"><span></span>To modify an existing module:</h5><p id="ww1180912" class="BodyAfterHead"><span></span>If the &lt;<em class="Emphasis">module_name</em>&gt;.ipx file is used as the project source in Diamond, double-click the file to open it in IPexpress.</p><p id="ww1180913" class="Body"><span></span>If the HDL file of the module is used as the project source, use the following procedure:</p><div id="ww1180914" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>1.	</span></span>In Diamond, choose <span style="font-weight: bold">Tools &gt; </span><span class="GUI">IPexpress</span> and select the module in the Module list on the left to populate the the <span class="GUI">macro type</span>, module name, and other relevant text boxes in the module’s Configuration tab view in the main area of the view.</div><div id="ww1205057" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>2.	</span></span>After you type in the File name and select Module Output click the <span style="font-weight: bold">Customize</span> button. A module dialog appears with a schematic block diagram of the module at left and various settings.</div><div id="ww1180915" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>3.	</span></span>In the module’s Customize dialog, check <span class="GUI">Import IPX to Diamond Project</span><span class="GUI"> at the bottom left </span>to include the &lt;<em class="Emphasis">module_name</em>&gt;.ipx file. IPexpress loads the previous configuration.</div><div id="ww1180916" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>4.	</span></span>Adjust the module configuration, then click <span class="GUI">Generate</span>. IPexpress overwrites the prior version.</div><h5 id="ww1180917" class="HeadingRunIn"><span></span>Optimizing Designs that Utilize FPGA Memory</h5><p id="ww1180918" class="BodyAfterHead"><span></span>Placement of memories to specific physical locations may contribute to improved design performance and density. Design floorplanning of PFU-based memories is typically accomplished using region, bounding box, and HGROUP/UGROUP constraints whereas EBR-based memories are typically placed using simple LOCATE preferences. Using a combination of the Floorplanner and Logical and Physical Preferences with a design iteration strategy can produce a superior implementation.</p><p id="ww1180919" class="Body"><span></span>For more information on design guidelines for optimal results, see the FPGA Design Guide.</p><h5 id="ww1180921" class="HeadingRunIn"><span></span>References</h5><p id="ww1200692" class="BodyAfterHead"><span></span>For more information on LatticeECP/EC, LatticeECP2/M, LatticeECP3, LatticeSC/M, MachXO, MachXO2, LatticeXP, and LatticeXP2 device memory blocks, refer to the following examples and technical notes from the Lattice Semiconductor Web site:</p><div id="ww1211301" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/view_document?document_id=50466" target="_blank">TN1264</a></span>, <span style="font-style: italic">ECP5 Memory Usage Guide</span></div><div id="ww1180924" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/dynamic/view_document.cfm?document_id=8521" target="_blank">TN1051</a></span>, <em class="Emphasis">Memory Usage Guide for LatticeECP/EC and LatticeXP Devices</em></div><div id="ww1188523" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/dynamic/view_document.cfm?document_id=19019" target="_blank">TN1094</a></span>, <span style="font-style: italic">On-Chip Memory Usage Guide for LatticeSC Devices</span></div><div id="ww1201103" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/dynamic/view_document.cfm?document_id=21640" target="_blank">TN1104</a></span>, <span style="font-style: italic">LatticeECP2/M Memory Usage Guide</span></div><div id="ww1201089" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/dynamic/view_document.cfm?document_id=32319" target="_blank">TN1179</a></span>, <em class="Emphasis">LatticeECP3 Memory Usage Guide</em></div><div id="ww1211992" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/dynamic/view_document.cfm?document_id=9921" target="_blank">TN1092</a></span>, <span style="font-style: italic">Memory Usage Guide for MachXO Devices</span></div><div id="ww1212034" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/dynamic/view_document.cfm?document_id=39082" target="_blank">TN1201</a></span>, <span style="font-style: italic">Memory Usage Guide for MachXO2 Devices</span></div><div id="ww1212035" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/view_document?document_id=50515" target="_blank">TN1290</a></span>, <em class="Emphasis">Memory Usage Guide for MachXO3L Devices</em></div><div id="ww1212037" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/dynamic/view_document.cfm?document_id=23976" target="_blank">TN1137</a></span>, <em class="Emphasis">LatticeXP2 Memory Usage Guide</em></div><div id="ww1218893" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/view_document?document_id=51658" target="_blank">TN1306</a></span><span style="font-style: italic">, CrossLink Memory Usage Guide</span></div><div id="ww1220304" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>FPGA-TN-02066, <span style="font-style: italic">Memory Usage Guide for MachXO3D Devices</span> </div><h5 id="ww1216695" class="HeadingRunIn"><span></span>See Also</h5><div id="ww1216700" class="Bulleted" style="vertical-align: baseline"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span style="color: #196bff; font-size: 10.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a href="../../Reference%20Guides/Hardware%20How-To/hardware_how_to.htm#ww1217682" title="Hardware How-To">Hardware How-To</a></span></div></div><div id="page_dates"><div class="ww_skin_page_publish_date"></div></div><!-- Related Topics --><!--                --><footer><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer></div></div><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript></body></html>