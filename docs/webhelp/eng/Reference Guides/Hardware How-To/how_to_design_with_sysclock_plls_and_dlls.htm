<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>How to Design with sysCLOCK PLLs and DLLs</title><link rel="Prev" href="how_to_design_with_latticesc_pcs_serdes.htm" title="Previous" /><link rel="Next" href="how_to_design_with_sysio_buffers.htm" title="Next" /><link rel="StyleSheet" href="../../css/font-awesome/css/font-awesome.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/how_to.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/webworks.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/print.css" type="text/css" media="print" /><script type="text/javascript" src="../scripts/common.js"></script><script type="text/javascript" src="../scripts/page.js"></script><script type="text/javascript" src="../scripts/search-client.js"></script><script type="text/javascript" src="../scripts/unidata.js"></script><script type="text/javascript" src="../scripts/unibreak.js"></script><noscript><div id="noscript_padding"></div></noscript></head><body id="pVsUbOYfAAaQ03Opvfi3mvw" class="ww_skin_page_body" onload="Page.OnLoad('../../index.htm#page/Reference%20Guides/Hardware%20How-To/how_to_design_with_sysclock_plls_and_dlls.htm');"><div id="ww_content_container"><header id="wwconnect_header"><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#"><i class="fa"></i></a></div><!-- was this helpful button --><!--                         --><!-- Moved breadcrumbs to bottom of the header so that the print --><!-- button would float to the right of the breadcrumbs. --><!-- PH 4June2019 --><div class="ww_skin_breadcrumbs"><a class="WebWorks_Breadcrumb_Link" href="../Strategies/strategy_settings.htm">Reference Guides</a> &gt; <a class="WebWorks_Breadcrumb_Link" href="hardware_how_to.htm#1181009">	Hardware How-To</a> &gt; How to Design with sysCLOCK PLLs and DLLs</div></header><div id="page_content_container" style="background-color: White; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px"><div id="page_content"><h2 id="ww1181009" class="Heading1"><span></span>How to Design with sysCLOCK PLLs and DLLs</h2><p id="ww1181010" class="BodyAfterHead"><span></span>The Lattice sysCLOCK PLL (phase-locked loop) and DLL (delay-locked loop) technology helps you manage clock distribution and skew to improve overall system performance. PLLs are good for applications requiring the lowest output jitter or jitter filtering. DLLs are well suited to applications where the clock may be stopped or transferring jitter from input to output is important. The Diamond software helps automate the implementation of sysCLOCK PLL and DLL modules from design entry through creation of a programming file.</p><p id="ww1181011" class="Body"><span></span>This How-to topic applies to all Lattice FPGA device families. For more sysCLOCK PLL information for these devices, see the <span class="Hyperlink"><a href="../../Reference%20Guides/Hardware%20How-To/how_to_design_with_sysclock_plls_and_dlls.htm#ww1181037" title="How to Design with sysCLOCK PLLs and DLLs">references</a></span> listed at the end of this topic.</p><h5 id="ww1181013" class="HeadingRunIn"><span></span>Design Flow</h5><p id="ww1181014" class="BodyAfterHead"><span></span>The following steps describe the typical flow for performing design entry, simulation, synthesis, and place and route of designs that incorporate sysCLOCK PLLs: </p><div id="ww1205103" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>1.	</span></span>Open Diamond and choose <span style="font-weight: bold">File &gt; New &gt; Project</span> to create a project that targets a supported device family. </div><div id="ww1181016" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>2.	</span></span>Click <span style="font-weight: bold">Tools &gt; IPexpress</span> to generate a specific configuration of a sysCLOCK PLL or DLL module using the IPexpress module generator.</div><div id="ww1181018" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>3.	</span></span>In the File List view, double click on your input HDL source file and instantiate one or more sysCLOCK PLL or DLL modules into your HDL design using Diamond’s internal Source Editor tool. </div><div id="ww1181019" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>4.	</span></span>Import the &lt;<em class="Emphasis">module_name</em>&gt;.ipx file to your project's source list using Diamond. Alternatively, you may import the defining module HDL file as your project source; however, future modifications to the module require additional steps. </div><div id="ww1205123" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>5.	</span></span>In the Process view, double click the <span style="font-weight: bold">Translate Design </span>process to create a pre-map version of the design. A green check mark will indicate if your NGD file was created successfully and the Output view will report results of the run. </div><div class="ww_skin_page_overflow"><table class="NoteIndented" cellspacing="0" summary=""><caption class="NoteTitleIndented" style="caption-side: top"><div id="ww1205126" class="NoteTitleIndented">Note </div></caption><tr><td style="background-color: White; border-bottom-color: #E5E5E5; border-bottom-style: none; border-bottom-width: 1px; border-left-style: none; border-right-color: #E5E5E5; border-right-style: none; border-right-width: 0px; border-top-color: #E5E5E5; border-top-style: none; border-top-width: 1.0pt; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 4px; vertical-align: top"><div id="ww1205128" class="CellBody"><span></span>If you see a yellow triangular icon with an exclamation point, double click on the adjacent warning symbol to view the message in the Output view. Check the Error and Warning tabs in the Output view for potential issues. Generally, use this approach to investigate all warning and error messages in your design flow.</div></td></tr></table></div><div id="ww1202121" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>6.	</span></span>In the Process view, double click the <span style="font-weight: bold">Map Design</span> process to create a post-map version of the design. Click on the Reports tab in the main view and in the Process Reports folder in the Design Summary list double click Map to open the MRP file. Use the Map Report to confirm correct parameter usage and the specific device resources utilized.</div><div id="ww1202128" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>7.	</span></span>In the Process view, double click the <span style="font-weight: bold">Place &amp; Route Design</span> process to create a Post-PAR version of the design. Double click Place &amp; Route Report in the Design Summary view to open the PAR report file and review the final implementation. </div><div id="ww1181023" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>8.	</span></span>Both phase-locked and delay-locked loops have analog behavior that can not be accurately modeled with most digital simulators, not all functionality of sysCLOCK PLL hardware is supported in Functional, Post-Route Functional, or Post-Route Timing Simulation phases.</div><div id="ww1181024" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>9.	</span></span>You may bypass IPexpress and directly instantiate PLL library primitives into your HDL source.</div><div class="ww_skin_page_overflow"><table class="Note" cellspacing="0" summary=""><caption class="NoteTitle" style="caption-side: top"><div id="ww1203675" class="NoteTitle">Important</div></caption><tr><td style="background-color: White; border-bottom-color: #E5E5E5; border-bottom-style: none; border-bottom-width: 1px; border-left-style: none; border-right-color: #E5E5E5; border-right-style: none; border-right-width: 0px; border-top-color: #E5E5E5; border-top-style: none; border-top-width: 1.0pt; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 4px; vertical-align: top"><div id="ww1203677" class="CellBody"><span></span>Note that it may become necessary to regenerate a given PLL or DLL module with updated options because you edited a preference later in the flow (pre- or post-Map) that was a result of an attribute spawned from module generation and was present in the module output file. This will cause the design to become out of synch with the your project’s source input module. </div></td></tr></table></div><p id="ww1203672" class="Body"><span></span>For example, it is possible to enhance a FREQUENCY preference in Spreadsheet view or manually in the LPF file in the Diamond flow that was initially auto-generated in the LPF because of clock divider options you selected for module generation in IPexpress. If you updated the FREQUENCY to a higher clock speed that is not in an allowable range for the clock divider options, you will encounter error messages during TRACE timing analysis. </p><h5 id="ww1181026" class="HeadingRunIn"><span></span>Modifying an Existing sysCLOCK PLL or DLL</h5><p id="ww1181027" class="BodyAfterHead"><span></span>If a configuration or port interface needs to be modified on an existing sysCLOCK PLL or DLL module of your project, use the following guidelines to make changes using IPexpress: </p><h5 id="ww1181028" class="StepIntro"><span></span>To modify an existing module:</h5><div id="ww1181029" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>If the &lt;<em class="Emphasis">module_name</em>&gt;.ipx file is used as the project source in Diamond, double-click the file to open it in IPexpress. </div><h5 id="ww1205208" class="StepIntro"><span></span>If the HDL file of the module is used as the project source, use the following procedure:</h5><div id="ww1205209" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>1.	</span></span>In Diamond, choose <span style="font-weight: bold">Tools &gt; </span><span class="GUI">IPexpress</span> and select the module in the Module list on the left to populate the the <span class="GUI">macro type</span>, module name, and other relevant text boxes in the module’s Configuration tab view in the main area of the view. </div><div id="ww1205210" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>2.	</span></span>After you type in the File name and select Module Output click the <span style="font-weight: bold">Customize</span> button. A module dialog appears with a schematic block diagram of the module at left and various settings. </div><div id="ww1205211" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>3.	</span></span>In the module’s Customize dialog, check <span class="GUI">Import IPX to Diamond Project</span><span class="GUI"> at the bottom left </span>to include the &lt;<em class="Emphasis">module_name</em>&gt;.ipx file. IPexpress loads the previous configuration. </div><div id="ww1205212" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>4.	</span></span>Adjust the module configuration, then click <span class="GUI">Generate</span>. IPexpress overwrites the prior version.</div><h5 id="ww1181034" class="HeadingRunIn"><span></span>Note on Using Tristate Internal Feedback Loops </h5><p id="ww1181035" class="BodyAfterHead"><span></span>(<em class="Emphasis">LatticeECP/EC</em>, LatticeECP2/M, <em class="Emphasis">LatticeXP,</em> LatticeSC/M) In cases where you are using a tristate I/O buffer as an internal feedback loop, then the default capacitance on that buffer should be set to zero. Use the OUTPUT LOAD preference to set this value. See the “Using Tristates as Internal Feedback Loops” section the OUTPUT LOAD preference topic for details.</p><h5 id="ww1183772" class="HeadingRunIn"><span></span>Note on PLL Output Lock in LatticeSC/M</h5><p id="ww1183785" class="BodyAfterHead"><span></span>The PLL Output Lock in LatticeSC/M designs requires added logic to prevent false out-of-lock signal.</p><p id="ww1183774" class="Body"><span></span>Depending on certain input conditions of the clock frequency, the relative input clock edge and PLL update edge relationships may cause the digital detect logic of the PLL LOCK signal to transition low for several clock cycles. While the digitally produced lock signal may transition low for several clock cycles, the analog core of the PLL maintains operation within all of its specifications. </p><p id="ww1183776" class="Body"><span></span>This LOCK signal transition may indicate a false out-of-lock occurrence if not properly filtered by the user design. The false out-of-lock signal is due to a synchronization state within the digital lock detect circuit itself and is not indicative of a true, analog out-of-lock condition of the PLL. </p><p id="ww1183770" class="Body"><span></span>To compensate for this potential false indication, it is recommended that you implement a PLL LOCK mask circuit to filter out false PLL out-of-lock (low pulses). Follow the instructions and recommendations provided in the section on Lock Output in technical note, <span class="Hyperlink">TN1098</span>, “LatticeSC sysCLOCK PLL/DLL User’s Guide” to ensure that you can work around this issue. </p><h5 id="ww1181037" class="HeadingRunIn"><span></span>References</h5><p id="ww1181038" class="BodyAfterHead"><span></span>For more information refer to the following examples and application notes from the Lattice Semiconductor web site. </p><div id="ww1211729" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/view_document?document_id=50463" target="_blank">TN1261</a></span> - <span style="font-style: italic">ECP5 SERDES/PCS Usage Guide</span></div><div id="ww1181040" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/dynamic/view_document.cfm?document_id=8519" target="_blank">TN1049</a></span>, <em class="Emphasis">LatticeECP/EC and LatticeXP sysCLOCK PLL Design and Usage Guide</em></div><div id="ww1188553" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/dynamic/view_document.cfm?document_id=9918" target="_blank">TN1089</a></span>, <span style="font-style: italic">MachXO sysCLOCK PLL Design and Usage Guide</span></div><div id="ww1190578" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/dynamic/view_document.cfm?document_id=19018" target="_blank">TN1098</a></span>, <span style="font-style: italic">LatticeSC sysCLOCK and PLL/DLL User’s Guide</span></div><div id="ww1188568" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/dynamic/view_document.cfm?document_id=21645" target="_blank">TN1103</a></span>, <span style="font-style: italic">LatticeECP2/M sysCLOCK PLL/DLL Design and Usage Guide</span></div><div id="ww1200969" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/dynamic/view_document.cfm?document_id=32318" target="_blank">TN1178</a></span>, <span style="font-style: italic">LatticeECP3 sysCLOCK PLL/DLL Design and Usage Guide</span></div><div id="ww1211118" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/view_document?document_id=50463" target="_blank">TN1261</a></span> - <span style="font-style: italic">ECP5 SERDES/PCS Usage Guide</span></div><div id="ww1204690" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/dynamic/view_document.cfm?document_id=39080" target="_blank">TN1199</a></span>, <span style="font-style: italic">Lattice MachXO2 sysCLOCK PLL Design and Usage Guide</span></div><div id="ww1212060" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/view_document?document_id=50515" target="_blank">TN1290</a></span>, <em class="Emphasis">Memory Usage Guide for MachXO3L Devices</em></div><div id="ww1211705" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/dynamic/view_document.cfm?document_id=23975" target="_blank">TN1126</a></span>, <span style="font-style: italic">LatticeXP2 sysCLOCK PLL Design and Usage Guide Technical Note</span></div><div id="ww1218919" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="http://www.latticesemi.com/view_document?document_id=51656" target="_blank">TN1304</a></span>, <span style="font-style: italic">CrossLink sysCLOCK PLL/DLL Design and Usage Guide</span></div><div id="ww1220431" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>FPGA-TN-02070, <span style="font-style: italic">sysClock PLL Usage Guide for MachXO3D</span></div><h5 id="ww1216502" class="HeadingRunIn"><span></span>See Also</h5><div id="ww1216507" class="Bulleted" style="vertical-align: baseline"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span style="color: #196bff; font-size: 10.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a href="../../Reference%20Guides/Hardware%20How-To/hardware_how_to.htm#ww1217682" title="Hardware How-To">Hardware How-To</a></span></div></div><div id="page_dates"><div class="ww_skin_page_publish_date"></div></div><!-- Related Topics --><!--                --><footer><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer></div></div><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript></body></html>