<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Creating and Running Custom Tcl Scripts</title><link rel="Prev" href="accessing_command_help_in_the_tcl_console.htm" title="Previous" /><link rel="Next" href="Running_Tcl_Scripts_When_Launching_Diamond.htm" title="Next" /><link rel="StyleSheet" href="../../css/font-awesome/css/font-awesome.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/tcl_bali.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/webworks.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/print.css" type="text/css" media="print" /><script type="text/javascript" src="../scripts/common.js"></script><script type="text/javascript" src="../scripts/page.js"></script><script type="text/javascript" src="../scripts/search-client.js"></script><script type="text/javascript" src="../scripts/unidata.js"></script><script type="text/javascript" src="../scripts/unibreak.js"></script><noscript><div id="noscript_padding"></div></noscript></head><body id="pAWCFXjh35iTuHxO9oObcgg" class="ww_skin_page_body" onload="Page.OnLoad('../../index.htm#page/Reference%20Guides/Tcl%20Commands/creating_and_running_tcl_scripts.htm');"><div id="ww_content_container"><header id="wwconnect_header"><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#"><i class="fa"></i></a></div><!-- was this helpful button --><!--                         --><!-- Moved breadcrumbs to bottom of the header so that the print --><!-- button would float to the right of the breadcrumbs. --><!-- PH 4June2019 --><div class="ww_skin_breadcrumbs"><a class="WebWorks_Breadcrumb_Link" href="../Strategies/strategy_settings.htm">Reference Guides</a> &gt; <a class="WebWorks_Breadcrumb_Link" href="Tcl_command_ref_guide.htm#1106351">Tcl Command Reference Guide</a> &gt; Creating and Running Custom Tcl Scripts</div></header><div id="page_content_container" style="background-color: White; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px"><div id="page_content"><h2 id="ww1106351" class="Heading1"><span></span>Creating and Running Custom Tcl Scripts</h2><p id="ww1106353" class="BodyAfterHead"><span></span>This topic describes how to easily create Tcl scripts using Diamond’s user interface and manual methods. FPGA design using Tcl scripts provides some distinct advantages over using the graphical user interface’s lists, views and menu commands. For example, Tcl scripts allow you to do the following: </p><div id="ww1060242" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>Set the tool environment to exactly the same state for every design run. This eliminates human errors caused by forgetting to manually set a critical build parameter from a drop-down menu.</div><div id="ww1060243" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>Manipulate intermediate files automatically, and consistently on every run. For example, EDIF file errors can be corrected prior to performing additional netlist transformation operations.</div><div id="ww1060230" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>Run your script automatically by using job control software. This gives you the flexibilty to run jobs at any time of day or night, taking advantage of idle cycles on your corporate computer system.</div><h5 id="ww1055409" class="HeadingRunIn"><span></span>Creating Tcl Scripts</h5><p id="ww1055412" class="Body"><span></span>There are a couple of different methods you can use to create Diamond Tcl scripts. This section will discuss each one and provide step-by-step instructions for you to get started Tcl scripting repetitious Diamond commands or entire workflows. </p><p id="ww1064326" class="Body"><span></span>One method you have available is to use your favorite text editor to enter a sequence of Diamond Tcl commands. The syntax of each the Diamond Tcl commands is available in later topics in this portion of the online help. This method should only be used by very experienced Diamond Tcl command line users. </p><p id="ww1060367" class="Body"><span></span>The preferred method is to let the Diamond GUI assist you in getting the correct syntax for each Tcl command. When you interact with the Diamond user interface each time you launch a <span style="font-style: italic">scriptable</span> process and the corresponding Diamond Tcl command is echoed to the Tcl Console. This makes it much simpler to get the correct command line syntax for each Diamond command. Once you have the fundamental commands executed in the correct order, you can then add additional Tcl code to perform error checking, or customization steps.</p><h5 id="ww1054284" class="StepIntro"><span></span>To create a Tcl command script in Diamond: </h5><div id="ww1060385" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>1.	</span></span>Start the Diamond design software and close any project that may be open.</div><div id="ww1060383" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>2.	</span></span>In the Tcl Console execute the custom <span style="font-weight: bold">reset</span> command. This clears the Tcl Console command history.</div><div id="ww1244994" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>3.	</span></span>Use the Diamond graphical user interface to start capturing the basic command sequence. The Tcl Console echos the commands in its window. Start by opening the project for which you wish to create the TCL script. Then click on the processes in the Process list to run them. For example, run these processes in their chronological order in the design flow:</div><div id="ww1244995" class="BulletedIndented"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../bullet2nd.png" alt="*" border="0" width="7" height="7" /></span></span>Synthesize Design</div><div id="ww1244996" class="BulletedIndented"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../bullet2nd.png" alt="*" border="0" width="7" height="7" /></span></span>Map Design</div><div id="ww1244997" class="BulletedIndented"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../bullet2nd.png" alt="*" border="0" width="7" height="7" /></span></span>Place &amp; Route Design</div><div id="ww1244998" class="BulletedIndented"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../bullet2nd.png" alt="*" border="0" width="7" height="7" /></span></span>Export Files</div><div id="ww1055158" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>4.	</span></span>In the Tcl Console window enter the command,</div><pre id="ww1054307" class="CodeIndented">save_script &lt;filename.ext&gt;</pre><div id="ww1054322" class="Indented">The &lt;filename.ext&gt; is any file identifier that has no spaces and contains no special characters except underscores. For example, <span style="font-weight: bold">myscript.tcl</span> or <span style="font-weight: bold">design_flow_1.tcl</span> are acceptable save_script values, but <span style="font-weight: bold">my$script</span> or <span style="font-weight: bold">my script</span> are invalid. The <span style="font-weight: bold">&lt;filename.ext&gt;</span> entry can be preceded with a absolute or relative path. Use the <span style="font-weight: bold">"/"</span> (i.e. forward slash) character to delimit the path elements. If the path is not specified explicitly the script is saved in the current working directory. The current working directory can be determined by using the TCL <span style="font-style: italic">pwd</span> command.</div><div id="ww1055180" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>5.	</span></span>You can now use your favorite text editor to make any changes to the script you feel are necessary. Start your text editor, navigate to the directory the <span style="font-style: italic">save_script</span> command saved the base script, and open the file.</div><div class="ww_skin_page_overflow"><table class="NoteIndented" cellspacing="0" summary=""><caption class="NoteTitleIndented" style="caption-side: top"><div id="ww1055508" class="NoteTitleIndented">Note</div></caption><tr><td style="background-color: White; border-bottom-color: #E5E5E5; border-bottom-style: none; border-bottom-width: 1px; border-left-style: none; border-right-color: #E5E5E5; border-right-style: none; border-right-width: 0px; border-top-color: #E5E5E5; border-top-style: none; border-top-width: 1.0pt; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 4px; vertical-align: top"><div id="ww1055510" class="CellBody"><span></span>In most all cases, you will have to clean up the script you saved and remove any invalid arguments or any commands that cannot be performed in the Diamond environment due to some conflict or exception. You will likely have to revisit this step later if after running your script you experience any run errors due to syntax errors or technology exceptions. </div></td></tr></table></div><h5 id="ww1245003" class="HeadingRunIn"><span></span>Sample Diamond Tcl Script </h5><p id="ww1245004" class="BodyAfterHead"><span></span>The following Diamond Tcl script shows a very simple script that opens a project, runs the entire design flow through the Place &amp; Route process, then closes the project. A typical script will contain more tasks and will check for failure conditions. Use this simple example as a general guideline. </p><div class="ww_skin_page_overflow"><table class="Code" cellspacing="0" summary=""><caption class="FigureTitle" style="caption-side: top"><div id="ww1245007" class="FigureTitle">Simple Diamond Script</div></caption><tr><td style="background-color: White; border-bottom-color: #E5E5E5; border-bottom-style: solid; border-bottom-width: 1px; border-left-style: none; border-right-color: #E5E5E5; border-right-style: solid; border-right-width: 0px; border-top-color: #a0a0a0; border-top-style: none; border-top-width: 1.0pt; padding-bottom: 4px; padding-left: 4px; padding-right: 4px; padding-top: 4px; vertical-align: top; width: 342pt"><pre id="ww1245009" class="Code">prj_project open "C:/lscc/diamond/examples/edif_counter/edif.ldf"</pre><pre id="ww1245010" class="Code">prj_run PAR -impl edif -forceAll</pre><pre id="ww1245011" class="Code">prj_project close</pre><pre id="ww1245012" class="Code">save_script c:/lscc/diamond/examples/edif_counter/myscript2.tcl</pre></td></tr></table></div><h5 id="ww1051364" class="HeadingRunIn"><span></span>Running Tcl Scripts </h5><p id="ww1055515" class="Body"><span></span>Diamond TCL scripts are run exclusively from the Diamond TCL Console. You can use either the TCL Console integrated into the Diamond UI, or by launching the stand-alone TCL Console.</p><h5 id="ww1055519" class="StepIntro"><span></span>To run a Tcl script in Diamond: </h5><div id="ww1055520" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>1.	</span></span>Launch the Diamond GUI, or the stand-alone TCL Console. </div><div id="ww1060663" class="Indented">Open Diamond but do not open your project. If your project is open, choose <span style="font-weight: bold">File &gt; Close Project</span>. </div><div id="ww1055521" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>2.	</span></span>If you are using the Diamond main window, click on the <span style="font-weight: bold">Tcl Console tab</span> in the Output area at the bottom to open the console. </div><div id="ww1245047" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>3.	</span></span>Use the TCL <span style="font-style: italic">source</span><span style="font-style: italic; font-weight: bold"> </span>command to load and run your TCL script. The <span style="font-style: italic">source</span> command requires, as it's only argument, the filename of the script you want to load and run. Prefix the script file name with any required relative or absolute path information. To run the example script shown in the previous section use:</div><pre id="ww1245048" class="CodeIndented">source C:/lscc/diamond/&lt;<span style="font-style: italic">version_number</span>&gt;/examples/edif_counter/myscript2.tcl</pre><div id="ww1106518" class="Indented">As long as there are no syntax errors or invalid arguments, the script will open the project, synthesize, map, and place-and-route the design. Once the design finishes it closes the project. If there are errors in the script, you will see the errors in red in the Tcl Console after you attempt to run it. Go back to your script and correct the errors that prevented the script from running. </div><h5 id="ww1159504" class="HeadingRunIn"><span></span>See Also</h5><div id="ww1159508" class="Portal"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><a href="../../Reference%20Guides/Tcl%20Commands/running_the_tcl_console.htm#ww1140453" title="Running the Tcl Console">Running the Tcl Console</a></div><div id="ww1159512" class="Portal"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><a href="../../Reference%20Guides/Tcl%20Commands/diamond_tool_tcl_command_syntax.htm#ww1245056" title="Diamond Tool Tcl Command Syntax">Diamond Tool Tcl Command Syntax</a></div><div id="ww1159428" class="Portal"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><a href="../../Reference%20Guides/Tcl%20Commands/Running_Tcl_Scripts_When_Launching_Diamond.htm#ww1106521" title="Running Tcl Scripts When Launching Diamond">Running Tcl Scripts When Launching Diamond</a></div><div id="ww1159431" class="Portal" style="vertical-align: baseline"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="../../../../../tcltk/doc/contents.htm" target="_blank">Tcl Manual</a></span></div></div><div id="page_dates"><div class="ww_skin_page_publish_date"></div></div><!-- Related Topics --><!--                --><footer><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer></div></div><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript></body></html>