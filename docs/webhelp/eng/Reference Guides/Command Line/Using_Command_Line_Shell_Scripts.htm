<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Using Command Line Shell Scripts</title><link rel="Prev" href="Using_Command_Files.htm" title="Previous" /><link rel="Next" href="../Tcl%20Commands/Tcl_command_ref_guide.htm" title="Next" /><link rel="StyleSheet" href="../../css/font-awesome/css/font-awesome.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/flow_3.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/webworks.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/print.css" type="text/css" media="print" /><script type="text/javascript" src="../scripts/common.js"></script><script type="text/javascript" src="../scripts/page.js"></script><script type="text/javascript" src="../scripts/search-client.js"></script><script type="text/javascript" src="../scripts/unidata.js"></script><script type="text/javascript" src="../scripts/unibreak.js"></script><noscript><div id="noscript_padding"></div></noscript></head><body id="pUoxgDIrXaxoAYrUM9TGGFA" class="ww_skin_page_body" onload="Page.OnLoad('../../index.htm#page/Reference%20Guides/Command%20Line/Using_Command_Line_Shell_Scripts.htm');"><div id="ww_content_container"><header id="wwconnect_header"><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#"><i class="fa"></i></a></div><!-- was this helpful button --><!--                         --><!-- Moved breadcrumbs to bottom of the header so that the print --><!-- button would float to the right of the breadcrumbs. --><!-- PH 4June2019 --><div class="ww_skin_breadcrumbs"><a class="WebWorks_Breadcrumb_Link" href="../Strategies/strategy_settings.htm">Reference Guides</a> &gt; <a class="WebWorks_Breadcrumb_Link" href="command_line_ref.htm#1005073">Command Line Reference Guide</a> &gt; <a class="WebWorks_Breadcrumb_Link" href="Command_Line_Tool_Usage.htm#1005073">Command Line Tool Usage</a> &gt; Using Command Line Shell Scripts</div></header><div id="page_content_container" style="background-color: White; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px"><div id="page_content"><h3 id="ww1005073" class="Heading2"><span></span>Using Command Line Shell Scripts</h3><p id="ww1005074" class="BodyAfterHead"><span></span>This topic discusses the use of shell scripts to automate either parts of your design flow or entire design flows. It also provides some examples of what you can do with scripts. These scripts are UNIX-based; however, it is also possible to create similar scripts called batch files for PC but syntax will vary in the DOS environment.</p><h5 id="ww1005075" class="HeadingRunIn"><span></span>Creating Shell Scripts </h5><p id="ww1005076" class="Body"><span></span>A UNIX shell script is an ASCII file containing commands targeted to a particular shell that interprets and executes the commands in the file. For example, you could target Bourne Shell (<span class="GUI">sh</span>), C-Shell (<span class="GUI">csh</span>), or Korn Shell (<span class="GUI">ksh</span>). These files also can contain comment lines that describe part of the script which then are ignored by the shell. You can use any text editing tool to create or edit a shell script, for example, <span class="GUI">vi</span> or <span class="GUI">emacs</span>.</p><p id="ww1005077" class="Body"><span></span>Here are some guidelines when you should observe when creating shell scripts:</p><div id="ww1005078" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>It is recommended that all shell scripts with “#!” followed by the path and name of the target shell on the first line, for example, #!/bin/ksh. This indicates the shell to be used to interpret the script.</div><div id="ww1005079" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>It is recommended to specify a search path because oftentimes a script will fail to execute for users that have a different or incomplete search path. For example:</div><div id="ww1005080" class="Indented">PATH=/home/usr/lsmith:/usr/bin:/bin; export PATH</div><div id="ww1005081" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>Arguments (executables and options) are separated by space and can be spread across one or more lines within the file.</div><div id="ww1005082" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>Place new lines or tabs anywhere white space would otherwise be allowed on the UNIX command line.</div><div id="ww1005083" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>Place all arguments on the same line, or one argument per line, or any combination of the two.</div><div id="ww1005084" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>There is no line length limitation within the file.</div><div id="ww1005085" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>All carriage returns and other non-printable characters are treated as space and ignored.</div><div id="ww1005086" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>Comments are preceded by a # (pound sign) and can start anywhere on a line and continue until the end of the line.</div><div id="ww1005087" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>It is recommended to add exit status to your script, but this is not required.</div><pre id="ww1005088" class="Code"># Does global timing meet acceptable requirement range?</pre><pre id="ww1005089" class="Code">&nbsp;&nbsp;&nbsp;&nbsp;if [ $timing -lt 5 &nbsp;-o &nbsp;$timing -gt 10 ]; then</pre><pre id="ww1005090" class="Code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo 1&gt;&amp;2 Timing \"$timing\" out of range</pre><pre id="ww1005091" class="Code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit 127</pre><pre id="ww1005092" class="Code">&nbsp;&nbsp;&nbsp;&nbsp;fi</pre><pre id="ww1005093" class="Code">&nbsp;&nbsp;&nbsp;&nbsp;etc...</pre><pre id="ww1005094" class="Code">&nbsp;&nbsp;&nbsp;&nbsp;# Completed, Exit OK</pre><pre id="ww1005095" class="Code">&nbsp;&nbsp;&nbsp;&nbsp;exit 0</pre><h5 id="ww1005096" class="HeadingRunIn"><span></span>Advantages of Using Shell Scripts</h5><p id="ww1005097" class="Body"><span></span>Using shell scripts can be advantageous in terms of saving time for tasks that are often used, in reducing memory usage, giving you more control over how the FPGA design flow is run, and in some cases, improving performance. </p><h5 id="ww1005098" class="HeadingRunIn"><span></span>Scripting with DOS</h5><p id="ww1005099" class="Body"><span></span>Scripts for the PC are referred to as batch files in the DOS environment and the common practice is to ascribe a .bat file extension to these files. Just like UNIX shell scripts, batch files are interpreted as a sequence of commands and executed. The COMMAND.COM or CMD.EXE (depending on OS) program executes these commands on a PC. Batch file commands and operators vary from their UNIX counterparts. So, if you wish to convert a shell script to a DOS batch file or vice-versa, we suggest you find a good general reference that shows command syntax equivalents of both operating systems.</p><h5 id="ww1006947" class="HeadingRunIn"><span></span>Examples</h5><p id="ww1006948" class="Body"><span></span>The following examples are examples of UNIX shell scripts written to run parts of the design flow. </p><h5 id="ww1005100" class="HeadingRunIn"><span></span>Example 1</h5><p id="ww1005101" class="BodyAfterHead"><span></span>Using the Korn shell, this script runs to separate flows using pfu.edn and pio.edn inputs through place-and-route, respectively. It then runs the clock boosting on each flow, lists applicable files for analysis, and outputs error messages that may have resulted in an errors file. <br />&nbsp;</p><pre id="ww1005102" class="Code">#$!/bin/ksh</pre><pre id="ww1005103" class="Code">#</pre><pre id="ww1005104" class="Code"># clockboosting.script</pre><pre id="ww1005105" class="Code">#</pre><pre id="ww1005106" class="Code">PATH=/home/mjones/design_run:/usr/bin:/bin; export PATH</pre><pre id="ww1005107" class="Code">#</pre><pre id="ww1005108" class="Code"># First design flow</pre><pre id="ww1005109" class="Code">#</pre><pre id="ww1005110" class="Code">edif2ngd -l LatticeEC pfu.edn pfu.ngo</pre><pre id="ww1005111" class="Code">ngdbuild -a LatticeEC &nbsp;pfu.ngo pfu.ngd</pre><pre id="ww1005112" class="Code">map -a LatticeEC pfu.ngd -o pfu.ncd test.prf</pre><pre id="ww1005113" class="Code">par -l 1 -n 1 -i 5 -c 0 pfu.ncd -w pfu.ncd test.prf </pre><pre id="ww1005114" class="Code">cst pfu.ncd test.prf</pre><pre id="ww1005115" class="Code">#</pre><pre id="ww1005116" class="Code"># Second design flow</pre><pre id="ww1005117" class="Code">#</pre><pre id="ww1005118" class="Code">edif2ngd -l LatticeEC pio.edn pio.ngo</pre><pre id="ww1005119" class="Code">ngdbuild -a LatticeEC pio.ngo pio.ngd</pre><pre id="ww1005120" class="Code">map -a LatticeEC pio.ngd -o pio.ncd test.prf</pre><pre id="ww1005121" class="Code">par -l 1 -n 1 -i 5 -c 0 pio.ncd -w pio.ncd test.prf</pre><pre id="ww1005122" class="Code">cst pio.ncd test.prf</pre><pre id="ww1005123" class="Code">ls *.grf *.cst &gt; files </pre><pre id="ww1005124" class="Code">grep -i error *.Out *.Err &gt;errors</pre></div><div id="page_dates"><div class="ww_skin_page_publish_date"></div></div><!-- Related Topics --><!--                --><footer><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer></div></div><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript></body></html>