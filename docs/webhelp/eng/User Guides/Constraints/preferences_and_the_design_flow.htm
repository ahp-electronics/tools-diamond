<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Preferences and the Design Flow</title><link rel="Prev" href="preference_flow.htm" title="Previous" /><link rel="Next" href="preferences_to_improve_timing.htm" title="Next" /><link rel="StyleSheet" href="../../css/font-awesome/css/font-awesome.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/design_imp_1.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/webworks.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/print.css" type="text/css" media="print" /><script type="text/javascript" src="../scripts/common.js"></script><script type="text/javascript" src="../scripts/page.js"></script><script type="text/javascript" src="../scripts/search-client.js"></script><script type="text/javascript" src="../scripts/unidata.js"></script><script type="text/javascript" src="../scripts/unibreak.js"></script><noscript><div id="noscript_padding"></div></noscript></head><body id="pNs5KkYBU_002fFy78u9z1a7uJg" class="ww_skin_page_body" onload="Page.OnLoad('../../index.htm#page/User%20Guides/Constraints/preferences_and_the_design_flow.htm');"><div id="ww_content_container"><header id="wwconnect_header"><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#"><i class="fa"></i></a></div><!-- was this helpful button --><!--                         --><!-- Moved breadcrumbs to bottom of the header so that the print --><!-- button would float to the right of the breadcrumbs. --><!-- PH 4June2019 --><div class="ww_skin_breadcrumbs"><a class="WebWorks_Breadcrumb_Link" href="../Getting%20Startred/Getting_Started.htm">User Guides</a> &gt; <a class="WebWorks_Breadcrumb_Link" href="Applying_Design_Constraints.htm#1099650">Applying Design Constraints</a> &gt; <a class="WebWorks_Breadcrumb_Link" href="using%20preferences.htm#1099650">Using Preferences</a> &gt; Preferences and the Design Flow</div></header><div id="page_content_container" style="background-color: White; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px"><div id="page_content"><h3 id="ww1099650" class="Heading2"><span></span>Preferences and the Design Flow</h3><p id="ww1155958" class="BodyAfterHead"><span></span>Design constraints, including logical preferences and HDL attributes, work on design elements that are present in the logical domain, which is the user’s netlist. In the design flow, logical preferences are specified in the logical preference file (.lpf), usually after synthesis and translation. HDL attributes are specified in the source files and are transferred into the binary native generic database (.ngd) file through logic synthesis and the Translate Design process (ngdbuild). The mapping process maps logical .ngd elements to physical elements in the native circuit description file (.ncd), and it translates logical preferences to physical preferences in the physical preference file (.prf).</p><h5 id="ww1153732" class="HeadingRunIn"><span></span>Logical Domain References</h5><p id="ww1155218" class="Body"><span></span>The logical domain refers to the objects in the .ngd, which is a direct translation of the EDIF netlist. The following HDL example, “Verilog Hierarchical Design,” illustrates the objects that will be transferred to the .ngd by the synthesis and translation processes.</p><div class="ww_skin_page_overflow"><table class="Code" cellspacing="0" summary=""><caption style="caption-side: top"></caption><tr><td style="background-color: White; border-bottom-color: #E5E5E5; border-bottom-style: solid; border-bottom-width: 1px; border-left-style: none; border-right-color: #E5E5E5; border-right-style: solid; border-right-width: 0px; border-top-color: #a0a0a0; border-top-style: none; border-top-width: 1.0pt; padding-bottom: 4px; padding-left: 4px; padding-right: 4px; padding-top: 4px; vertical-align: top; width: 342pt"><pre id="ww1155223" class="Code">module verilog_hierarchical_design(q, a, b, sel, r_l, clk, rst);</pre><pre id="ww1155224" class="Code">output [7:0] q;</pre><pre id="ww1155225" class="Code">input [7:0] a, b;</pre><pre id="ww1155226" class="Code">input sel, r_l, clk, rst;</pre><pre id="ww1155227" class="Code">wire [7:0] mux_out, reg_out;</pre><pre id="ww1155229" class="Code">&nbsp;</pre><pre id="ww1155840" class="Code">mux mux_1 (.out(mux_out), .a(a), .b(b), .sel(sel));</pre><pre id="ww1155230" class="Code">&nbsp;</pre><pre id="ww1155231" class="Code">reg8 reg8_1 (.clk(clk), .data(mux_out), .q(reg_out), .rst(rst));</pre><pre id="ww1155232" class="Code">&nbsp;</pre><pre id="ww1155233" class="Code">rotate rotate_1 (q, reg_out, clk, r_l, rst);</pre><pre id="ww1155235" class="Code">&nbsp;</pre><pre id="ww1155843" class="Code">endmodule</pre></td></tr></table></div><p id="ww1155391" class="Body"><span></span>In the following .lpf file for the “Verilog Hierarchical Design” example, the timing, floorplan, and I/O preferences are defined in terms of objects of the logical domain—the ports, nets, or cell instances from the “verilog hierarchical design” cell in the EDIF file. The .lpf file illustrates package/floorplan locations of the FPGA device such as package locations P7, K4, and E13.</p><div class="ww_skin_page_overflow"><table class="Code" cellspacing="0" summary=""><caption style="caption-side: top"></caption><tr><td style="background-color: White; border-bottom-color: #E5E5E5; border-bottom-style: solid; border-bottom-width: 1px; border-left-style: none; border-right-color: #E5E5E5; border-right-style: solid; border-right-width: 0px; border-top-color: #a0a0a0; border-top-style: none; border-top-width: 1.0pt; padding-bottom: 4px; padding-left: 4px; padding-right: 4px; padding-top: 4px; vertical-align: top; width: 342pt"><pre id="ww1155396" class="Code">COMMERCIAL ;</pre><pre id="ww1155397" class="Code">BLOCK RESETPATHS ;</pre><pre id="ww1155398" class="Code">BLOCK ASYNCPATHS ;</pre><pre id="ww1155399" class="Code"># Timing Preferences</pre><pre id="ww1155400" class="Code">FREQUENCY PORT "clk" 66 MHz;</pre><pre id="ww1155401" class="Code">INPUT_SETUP ALLPORTS 2.5ns CLKPORT "clk";</pre><pre id="ww1155402" class="Code"># Floorplan Preferences</pre><pre id="ww1155403" class="Code">UGROUP "Crit_Path" </pre><pre id="ww1155404" class="Code">	BLKNAME mux_1/out_4</pre><pre id="ww1155405" class="Code">	BLKNAME rotate_1/q_7</pre><pre id="ww1155406" class="Code">	BLKNAME reg8_1/q_1;</pre><pre id="ww1155407" class="Code"># I/O Preferences</pre><pre id="ww1155408" class="Code">LOCATE  COMP  "clk"  SITE  "P7";</pre><pre id="ww1155409" class="Code">LOCATE  COMP  "rst"  SITE  "K4";</pre><pre id="ww1155410" class="Code">LOCATE  COMP  "sel"  SITE  "E13";</pre></td></tr></table></div><p id="ww1155948" class="Body"><span></span>While logic synthesis might rename or adjust the original design hierarchy, it is generally easy to relate logical domain references to the original HDL or schematic-based model of the design.</p><h5 id="ww1155949" class="HeadingRunIn"><span></span>The Map Program</h5><p id="ww1155950" class="Body"><span></span>The map program performs two major roles in the Diamond design flow: </p><div id="ww1156422" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>It maps the .ngd library elements into elements in the native circuit description file (.ncd), which is referred to as the physical domain. Logical elements of the .ngd (such as ports, flip-flops, and LUTs) are mapped to physical elements of the .ncd (such as slices and I/O components).</div><div id="ww1153843" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>It interprets all logical preferences from the .lpf and the .ngd files and, where appropriate, translates them into equivalent physical preferences in the physical preference file (.prf). </div><p id="ww1156092" class="BodyAfterHead"><span></span>The map program also performs design rule checking when interpreting preferences. Logical constraints from the .lpf/.ngd are validated against the logical database (.ngd) file. Any logical references that do not exist in the .ngd are reported as semantic warnings and ignored by default. You can change the default by setting the “Ignore Preference Errors” property of the Map Design process to False in the project Strategy dialog box. This will cause the map program to error and will make these issues more visible.</p><p id="ww1155156" class="Body"><span></span>When you update and save the .lpf during the design flow, the project gets initialized back to pre-map status and you must rerun the map process. </p><div class="ww_skin_page_overflow"><table class="Note" cellspacing="0" summary=""><caption class="NoteTitle" style="caption-side: top"><div id="ww1155159" class="NoteTitle">Note</div></caption><tr><td style="background-color: White; border-bottom-color: #E5E5E5; border-bottom-style: none; border-bottom-width: 1px; border-left-style: none; border-right-color: #E5E5E5; border-right-style: none; border-right-width: 0px; border-top-color: #E5E5E5; border-top-style: none; border-top-width: 1.0pt; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 4px; vertical-align: top"><p id="ww1155161" class="TableFootnote">If the time stamp of the .lpf for the project is newer than the post-map .ncd file, the Map Design and Place &amp; Route Design processes will be reset. If you want to avoid resetting the project state, avoid saving any additions or changes to the .lpf file. You can still view the in-memory preferences in <span class="Hyperlink"><a href="../../User%20Guides/Constraints/preview_lpf.htm#ww1204437" title="Previewing Preferences Before Saving">Preference Preview</a></span>. </p><p id="ww1187065" class="TableFootnote">You can also use Timing Analysis View to experiment with sets of timing preferences and obtain quick analysis without rerunning Map and Place &amp; Route. See <span class="Hyperlink"><a href="../../User%20Guides/Static%20Timing%20Analysis/using_timing_analysis_view.htm#ww1084290" title="Using Timing Analysis View">Using Timing Analysis View</a></span>.</p></td></tr></table></div><h5 id="ww1155162" class="HeadingRunIn"><span></span>Preferences in the .prf File</h5><p id="ww1155746" class="Body"><span></span>The map process translates physical counterparts of logical preferences, as required, into the physical preference (.<span class="Hyperlink"><a href="../../User%20Guides/Constraints/physical_preference_file.htm#ww1548508" title="The Physical Preference File">prf</a></span>) file. Preferences listed in the .prf file result from both logical preferences and HDL attributes. </p><p id="ww1155770" class="Body"><span></span>In the following .prf file for the “Verilog Hierarchical Design” example, the timing, I/O, and floorplan preferences of the .lpf have been translated by the design mapper to references that are compatible with the .ncd. In this example, most preferences appear unchanged; the object identifiers are common between the .ngd and .ncd. However, the UGROUP preference in the .lpf has been translated into a PGROUP with object references that reflect the post-map design and the consolidation of logical domain blocks into physical components.</p><div class="ww_skin_page_overflow"><table class="Code" cellspacing="0" summary=""><caption style="caption-side: top"></caption><tr><td style="background-color: White; border-bottom-color: #E5E5E5; border-bottom-style: solid; border-bottom-width: 1px; border-left-style: none; border-right-color: #E5E5E5; border-right-style: solid; border-right-width: 0px; border-top-color: #a0a0a0; border-top-style: none; border-top-width: 1.0pt; padding-bottom: 4px; padding-left: 4px; padding-right: 4px; padding-top: 4px; vertical-align: top; width: 342pt"><pre id="ww1155751" class="Code">SCHEMATIC START ;</pre><pre id="ww1155752" class="Code"># map:  version Diamondv1.0_PROD_Build (133) -- WARNING: Map write only section -- Fri Jun 11 09:06:59 2010</pre><pre id="ww1155753" class="Code">&nbsp;</pre><pre id="ww1155778" class="Code">SYSCONFIG PERSISTENT=OFF CONFIG_MODE=SLAVE_SERIAL DONE_OD=ON DONE_EX=OFF MCCLK_FREQ=2.5 CONFIG_SECURE=OFF WAKE_UP=21 COMPRESS_CONFIG=OFF INBUF=OFF ENABLE_NDR=OFF ;</pre><pre id="ww1155779" class="Code">PGROUP "Crit_Path" </pre><pre id="ww1155756" class="Code">	COMP "rotate_1/SLICE_4"</pre><pre id="ww1155773" class="Code">	COMP "reg8_1/SLICE_6"</pre><pre id="ww1155774" class="Code">	COMP "mux_1/SLICE_13";</pre><pre id="ww1155775" class="Code">LOCATE COMP "rst" SITE "K4" ;</pre><pre id="ww1155760" class="Code">LOCATE COMP "clk" SITE "P7" ;</pre><pre id="ww1155761" class="Code">LOCATE COMP "sel" SITE "E13" ;</pre><pre id="ww1155762" class="Code">FREQUENCY PORT "clk" 66.000000 MHz ;</pre><pre id="ww1155763" class="Code">SCHEMATIC END ;</pre><pre id="ww1155764" class="Code">BLOCK RESETPATHS ;</pre><pre id="ww1155765" class="Code">BLOCK ASYNCPATHS ;</pre><pre id="ww1155766" class="Code">INPUT_SETUP ALLPORTS 2.500000 ns CLKPORT "clk" ;</pre><pre id="ww1155767" class="Code">COMMERCIAL ;</pre></td></tr></table></div><p id="ww1154682" class="Body"><span></span>Although it is possible to add preferences to the .prf file manually, this method is definitely not recommended because it would have to be done again each time after remapping.</p><h5 id="ww1153855" class="HeadingRunIn"><span></span>Physical Domain References</h5><p id="ww1154518" class="Body"><span></span>In cases where there is a one-to-one correlation between a logical object and a silicon device element, the physical domain reference uses the same identifier as the logical domain reference. This is common for objects such as ports, EBRs, PLL/DLLs, and DSP blocks. But objects that are consolidated into slices—such as ports, flip-flops and LUTs—are renamed with a SLICE identifier. </p><p id="ww1255143" class="Body"><span></span>Floorplan View presents a graphical view of the physical placement of elements after the Place &amp; Route process. The tool tips and status bar provide logic information and location for placed components. You can view the precise logical identifiers for a SLICE component by double-clicking the component on the Floorplan View layout to open <span class="Hyperlink"><a href="../../User%20Guides/Constraints/logic_block_view.htm#ww1227922" title="Logic Block View">Logic Block View</a></span>. Logic Block View’s schematic representation displays the logical names of registers within the slice.</p><p id="ww1254267" class="Body"><span></span>You can also cross-probe to Netlist View to view the precise logical identifiers.</p><div class="ww_skin_page_overflow"><table class="Figure" cellspacing="0" summary=""><caption style="caption-side: top"></caption><tr><td style="background-color: White; border-bottom-color: #E5E5E5; border-bottom-style: none; border-bottom-width: 1px; border-left-style: none; border-right-color: #E5E5E5; border-right-style: none; border-right-width: 0px; border-top-style: none; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; vertical-align: top"><div class="ww_skin_page_overflow"><div id="ww1254266" class="FigureFrame"><img class="Default" src="../../User%20Guides/Constraints/images/x_probe_FP_netlist.jpg" width="100%" style="display: block; left: 0.0pt; max-height: 293px; max-width: 450px; top: 0.0pt" alt="" title="" /></div></div></td></tr></table></div><h5 id="ww1099819" class="HeadingRunIn"><span></span>See Also</h5><div id="ww1099821" class="Portal"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="../../Reference%20Guides/Constraints%20Ref/hdl_attributes.htm#ww1270828" title="HDL Attributes">HDL Attributes</a></span></div><div id="ww1099823" class="Portal"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="../../User%20Guides/Constraints/The_Logical_Preference_File.htm#ww1493207" title="The Logical Preference File">The Logical Preference File</a></span></div><div id="ww1099825" class="Portal"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="../../User%20Guides/Constraints/physical_preference_file.htm#ww1548508" title="The Physical Preference File">The Physical Preference File</a></span></div><div id="ww1574588" class="Portal"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="../../User%20Guides/Constraints/preference_conflict_resolution.htm#ww1565686" title="Preference Conflict Resolution">Preference Conflict Resolution</a></span></div></div><div id="page_dates"><div class="ww_skin_page_publish_date"></div></div><!-- Related Topics --><!--                --><footer><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer></div></div><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript></body></html>