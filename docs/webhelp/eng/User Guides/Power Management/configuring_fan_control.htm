<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Configuring Fan Control</title><link rel="Prev" href="configuring_temperature_monitors.htm" title="Previous" /><link rel="Next" href="set_fault_log_options.htm" title="Next" /><link rel="StyleSheet" href="../../css/font-awesome/css/font-awesome.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/power_mgnt.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/webworks.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/print.css" type="text/css" media="print" /><script type="text/javascript" src="../scripts/common.js"></script><script type="text/javascript" src="../scripts/page.js"></script><script type="text/javascript" src="../scripts/search-client.js"></script><script type="text/javascript" src="../scripts/unidata.js"></script><script type="text/javascript" src="../scripts/unibreak.js"></script><noscript><div id="noscript_padding"></div></noscript></head><body id="pa84JbKtxth54gg6SipJNRA" class="ww_skin_page_body" onload="Page.OnLoad('../../index.htm#page/User%20Guides/Power%20Management/configuring_fan_control.htm');"><div id="ww_content_container"><header id="wwconnect_header"><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#"><i class="fa"></i></a></div><!-- was this helpful button --><!--                         --><!-- Moved breadcrumbs to bottom of the header so that the print --><!-- button would float to the right of the breadcrumbs. --><!-- PH 4June2019 --><div class="ww_skin_breadcrumbs"><a class="WebWorks_Breadcrumb_Link" href="../Getting%20Startred/Getting_Started.htm">User Guides</a> &gt; <a class="WebWorks_Breadcrumb_Link" href="designing_power_mgnt_systems.htm#1010487">	Designing with Lattice Diamond Platform Designer</a> &gt; Configuring Fan Control</div></header><div id="page_content_container" style="background-color: White; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px"><div id="page_content"><h2 id="ww1010487" class="Heading1"><span></span>Configuring Fan Control</h2><p id="ww1010488" class="BodyAfterHead"><span></span>Platform Designer’s Fan Controller provides fan control for 2-wire, 3-wire, or 4-wire fans. The fan controller supports multiple fan speeds, under-speed alarm detection, and a configurable startup pulse. It enables you to set three levels of speed control through the pulse width modulated (PWM) signal. Up to 18 separate fans can be controlled. </p><h5 id="ww1010489" class="StepIntro"><span></span>To configure fan control:</h5><div class="ww_skin_page_overflow"><div id="ww1010490" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>1.	</span></span>Select <span style="font-weight: bold">Fan Controller </span>from the menu pane, and then select a fan in the “Fan in System” list or add a new fan by clicking the add button <img class="Default" src="../../User%20Guides/Power%20Management/images/power_mgnt.03.24.1.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 20px; max-width: 20px; top: 0.0pt" alt="" title="" /> on the lower left.</div></div><div id="ww1010494" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>2.	</span></span>In the Type Setting section on the Parameters page, select the fan type from the drop-down menu. </div><div id="ww1010495" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>3.	</span></span>If you selected 3 Wire (Low Side Drive), 3 Wire (High Side Drive), or 4 Wire, also specify the <span style="font-weight: bold">Sense Type</span> for alarm detection, as follows:</div><div id="ww1010496" class="BulletedIndented"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../bullet2nd.png" alt="*" border="0" width="7" height="7" /></span></span>If the fan supports a locked signal as fan feedback to indicate that the fan is locked or stuck, select <span style="font-weight: bold">Alarm (Active High)</span> or <span style="font-weight: bold">Alarm (Active Low)</span>.</div><div id="ww1010497" class="BulletedIndented"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../bullet2nd.png" alt="*" border="0" width="7" height="7" /></span></span>If the fan includes a tachometer feedback signal, select <span style="font-weight: bold">Tach</span> (2 Pulses/Rev), and then do the following:</div><div id="ww1010498" class="BulletedIndented2"><span class="WebWorks_Number" style="width: 16.560000000000002pt"><span><img src="../bullet2nd.png" alt="*" border="0" width="7" height="7" /></span></span>In the Alarm Interval box, type a value for the number of ms that will be allowed between pulses before an under-speed violation is registered. </div><div id="ww1010499" class="BulletedIndented2"><span class="WebWorks_Number" style="width: 16.560000000000002pt"><span><img src="../bullet2nd.png" alt="*" border="0" width="7" height="7" /></span></span>Select a value between 1 and 10 from the Alarm Filter Count. This is the number of times the alarm interval must be detected before the Alarm signal will be asserted.</div><p id="ww1010500" class="Indented2">With tachometer feedback, a +/- 10% hysteresis will be applied to the corresponding assertion/de-assertion of the failure count to prevent a false alarm. </p><div id="ww1010501" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>4.	</span></span>In the PWM Setting section, use the sliders to select a duty cycle percentage for Speed3, Speed2, and Speed1. </div><div id="ww1023892" class="Indented">Each can be set in 5% increments, ranging from 5% to 95%. The fastest speed must be assigned to Speed3, with the middle speed assigned to Speed2, and the slowest speed assigned to Speed1.</div><div id="ww1010502" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>5.	</span></span>Use the slider to specify the PWM frequency. The frequency can be set in increments of 0.8 kHz, up to 80.0 kHz.</div><div id="ww1010503" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>6.	</span></span>Select the polarity for the PWM signal, based on the nature of the MOSFET switch and on-board buffers. </div><div id="ww1010504" class="Indented">Refer to the fan data sheet and the board requirements for information about the correct setting of PWM polarity.</div><div id="ww1010505" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>7.	</span></span>Optionally, enable the Startup Control and select the pulse duration, in increments of .25s for the startup period. </div><div id="ww1023896" class="Indented">When startup control is enabled, the fan controller will send a kickstart pulse of the chosen duration to the fan before switching to the selected PWM setting.</div><div id="ww1010506" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>8.	</span></span>Select the InterConnections tab. </div><div id="ww1041361" class="Indented">The InterConnections page allows you to specify the signals that the Platform Designer will use as fan controller ports. Each fan has an independent set of interconnections. </div><div id="ww1081021" class="Indented">The PWM Out and Tach/Alarm Sense are the external connections to the fan. The other signals (Speed Sel 1 ... Alarm Out) are logical connections that set the operation of the fan controller during runtime. </div><div id="ww1080948" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>9.	</span></span>Assign the PWM Out and Tach/Alarm Sense to external ports by dragging the desired ports from the Signal Pool.</div><div id="ww1078298" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>10.	</span></span>Drag the desired signals from the Signal Pool to set the logical connections for Speed Sel, Run Off, Run Full, and Alarm Out.</div><h5 id="ww1059920" class="HeadingRunIn"><span></span>See Also</h5><div id="ww1059933" class="Portal" style="vertical-align: baseline"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="../../User%20Guides/Power%20Management/configuring_temperature_monitors.htm#ww1010394" title="Configuring Temperature Sense (TMON)">Configuring Temperature Sense (TMON)</a></span></div><div id="ww1059942" class="Portal" style="vertical-align: baseline"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="../../User%20Guides/Power%20Management/manage_voltage.htm#ww1036413" title="Configuring Voltage Sense (VMON) and Control (TRIM)">Configuring Voltage Sense (VMON) and Control (TRIM)</a></span></div></div><div id="page_dates"><div class="ww_skin_page_publish_date"></div></div><!-- Related Topics --><!--                --><footer><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer></div></div><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript></body></html>