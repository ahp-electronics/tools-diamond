<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Running Multiple PAR Jobs in Parallel</title><link rel="Prev" href="Reducing_Runtime_in_PAR.htm" title="Previous" /><link rel="Next" href="bit_generation.htm" title="Next" /><link rel="StyleSheet" href="../../css/font-awesome/css/font-awesome.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/design_imp_2.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/webworks.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/print.css" type="text/css" media="print" /><script type="text/javascript" src="../scripts/common.js"></script><script type="text/javascript" src="../scripts/page.js"></script><script type="text/javascript" src="../scripts/search-client.js"></script><script type="text/javascript" src="../scripts/unidata.js"></script><script type="text/javascript" src="../scripts/unibreak.js"></script><noscript><div id="noscript_padding"></div></noscript></head><body id="pv9W5M3KoON8mCIWbcFJJCA" class="ww_skin_page_body" onload="Page.OnLoad('../../index.htm#page/User%20Guides/Implementing%20the%20Design/Running_Multiple_PAR_Jobs.htm');"><div id="ww_content_container"><header id="wwconnect_header"><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#"><i class="fa"></i></a></div><!-- was this helpful button --><!--                         --><!-- Moved breadcrumbs to bottom of the header so that the print --><!-- button would float to the right of the breadcrumbs. --><!-- PH 4June2019 --><div class="ww_skin_breadcrumbs"><a class="WebWorks_Breadcrumb_Link" href="../Getting%20Startred/Getting_Started.htm">User Guides</a> &gt; <a class="WebWorks_Breadcrumb_Link" href="implementing_the_design.htm#1022977">Implementing the Design </a> &gt; <a class="WebWorks_Breadcrumb_Link" href="placing_and_routing_a_design.htm#1022977">Place and Route</a> &gt; Running Multiple PAR Jobs in Parallel</div></header><div id="page_content_container" style="background-color: White; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px"><div id="page_content"><h3 id="ww1022977" class="Heading2"><span></span>Running Multiple PAR Jobs in Parallel</h3><p id="ww1055551" class="BodyAfterHead"><span></span>The PAR Multi-tasking option allows you to use multiple machines (nodes) to run multiple place-and-route jobs at the same time instead of serially. You can run this feature in the Diamond environment. Use the “Multi-tasking Node List” option in the Place and Route Settings of the Strategies dialog box, or use the PAR-m option from the command line.</p><p id="ww1055591" class="Body"><span></span>This ability to run multiple jobs on different nodes simultaneously can significantly reduce the time it takes to complete these runs. Otherwise, it would take the cumulative time for each job to complete by itself in a consecutive manner, and this could mean the difference between 1 hour and 10 hours of total time.</p><p id="ww1055400" class="BodyAfterHead"><span></span>The PAR multi-tasking option is supported three ways:</p><div id="ww1055402" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>Local multi-tasking, where multiple PAR runs are executed on a single machine.</div><div id="ww1055403" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>Networked multi-tasking, where multiple PAR runs are executed on multiple machines.</div><div id="ww1055404" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>A combination of local and networked.</div><h5 id="ww1055489" class="HeadingRunIn"><span></span>Creating a Node List File</h5><p id="ww1055907" class="BodyAfterHead"><span></span>For a PC or for UNIX/Linux, you must first create an ASCII-based node list file input that specifies the candidate machines that will allow multiple PAR jobs to be run in parallel.</p><p id="ww1055843" class="Body"><span></span>The node list file contains node description blocks of information on separate lines for each machine in the format shown below:</p><p id="ww1055845" class="Body"><span></span>[&lt;<span style="font-style: italic">node_name</span>&gt;]</p><p id="ww1055846" class="Body"><span></span>System = &lt;<span style="font-style: italic">linux | pc</span>&gt;</p><p id="ww1055847" class="Body"><span></span>Corenum = &lt;<span style="font-style: italic">number_of_cores</span>&gt;</p><p id="ww1055848" class="Body"><span></span>Env = &lt;<span style="font-style: italic">file_name</span>&gt; </p><p id="ww1055849" class="Body"><span></span>Workdir = &lt;<span style="font-style: italic">directory_name</span>&gt;</p><p id="ww1055991" class="Body"><span></span>[&lt;<span style="font-style: italic">node_name2</span>&gt;]</p><p id="ww1055992" class="Body"><span></span>System = &lt;<span style="font-style: italic">linux | pc</span>&gt;</p><p id="ww1055993" class="Body"><span></span>Corenum = &lt;<span style="font-style: italic">number_of_cores</span>&gt;</p><p id="ww1055994" class="Body"><span></span>Env = &lt;<span style="font-style: italic">file_name</span>&gt; </p><p id="ww1055995" class="Body"><span></span>Workdir = &lt;<span style="font-style: italic">directory_name</span>&gt;</p><p id="ww1055850" class="Body"><span></span><span style="font-style: italic">where</span>: </p><p id="ww1056027" class="Body"><span></span>The [&lt;<span style="font-style: italic">node_name</span>&gt;] value contains the machine name in square brackets. For example, if your machine name is <span style="font-style: italic">jsmith</span>, this line would simply show [jsmith] on the first line. </p><div class="ww_skin_page_overflow"><table class="Note" cellspacing="0" summary=""><caption class="NoteTitle" style="caption-side: top"><div id="ww1063501" class="NoteTitle">Note</div></caption><tr><td style="background-color: White; border-bottom-color: #E5E5E5; border-bottom-style: none; border-bottom-width: 1px; border-left-style: none; border-right-color: #E5E5E5; border-right-style: none; border-right-width: 0px; border-top-color: #E5E5E5; border-top-style: none; border-top-width: 1.0pt; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 4px; vertical-align: top"><div id="ww1063503" class="CellBody"><span></span>For UNIX/Linux, you can use many networked nodes to run the PAR job, so the node list will have a corresponding number of node description blocks in it. For PC, there will only be one node description block in the node list since you can only employ one PC that has multiple cores. This feature does not currently support a host of networked PCs.</div></td></tr></table></div><p id="ww1056028" class="Body"><span></span>The System node description line lists the platform the machine runs on. This line can only take Linux or PC as a value. </p><p id="ww1056156" class="Body"><span></span>Corenum specifies how many CPU cores there are on the machine. Changing it to zero disables the node from running PAR tasks.</p><p id="ww1056191" class="Body"><span></span>Env specifies an environment setup file to be run before the multiple PAR job is run on the remote machine. If the remote machine environment is ready, then this line can be omitted. To test if a remote machine is ready, run the following command to see if PAR can be run remotely: </p><p id="ww1056220" class="Body"><span></span>ssh &lt;<span style="font-style: italic">remote_machine</span>&gt; &lt;<span style="font-style: italic">par_cmd_options</span>&gt; </p><p id="ww1108770" class="Body"><span></span>Workdir specifies in which working directory on the remote machine the PAR multi-task job should be run. If account permissions allow you to get into that directory automatically after login, this line can also be omitted. You can test if a remote user account needs to set the working directory by running the following command and see if the design can be found: </p><p id="ww1108771" class="Body"><span></span>ssh &lt;<span style="font-style: italic">remote_machine</span>&gt; ls &lt;<span style="font-style: italic">ncd_file</span>&gt;” </p><p id="ww1056011" class="Body"><span></span>If the design is found after issuing the above command, there is no need to specify this line. </p><p id="ww1109123" class="Body"><span></span>If Workdir is set to a location, it must be set to a directory where ssh into that nodename has read/write access in that directory.</p><h5 id="ww1055853" class="StepIntro"><span></span>General Node List Rules: </h5><div id="ww1056070" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>You must use the equals sign for each node description line. </div><div id="ww1055854" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>Only the names of files and directories are case sensitive on UNIX and Linux. Node description line markers, for example, “Corenum<span style="font-weight: bold"> =</span>” can appear in upper, lower, or mixed case. </div><div id="ww1056099" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>The [&lt;<span style="font-style: italic">node_name</span>&gt;], Corenum and System lines are required for any node list file.</div><div id="ww1055855" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>The Env and Workdir node description lines are optional.</div><div id="ww1055859" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>For PC, the nodelist file should only include one node description block on the local machine. Remotely networked PCs are not supported. Any entries for remote nodes on a PC network will be discarded by the PAR multi-tasking feature. </div><div id="ww1144961" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>For UNIX/Linux, the nodelist file can have multiple machine nodes; but it should not include PC type nodes. </div><div id="ww1144962" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>Any text following double forward slashes, "//", will be considered as a comment and ignored, except when those double forward slashes are enclosed in double quotation marks. If you need to specify a path containing a double forward slash, you can do so by enclosing it in quotes. Comments can be added at any position in a line.</div><div id="ww1144974" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>Whitespace around node description line markers is ignored.</div><div id="ww1144975" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>Blank lines, including those with comments, are ignored.</div><h5 id="ww1055863" class="HeadingRunIn"><span></span>PAR Multi-Tasking Environment Setup</h5><p id="ww1055864" class="BodyAfterHead"><span></span>For PC, running PAR remotely is not supported, so multiple PAR processes can only run in parallel on one PC. Since the child PAR process takes the environment from the parent, no environment variable setup is necessary.</p><p id="ww1055865" class="Body"><span></span>For UNIX/Linux, there are two ways to set up the environment:</p><div id="ww1055866" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>Use the account login profile and source files.</div><div id="ww1055867" class="Indented">For the account to allow PAR to be run remotely, it should have an .rc file (.bashrc if the bash shell used) that runs automatically when a secure shell (ssh<span style="font-weight: bold">)</span> call is received. This script file needs to set up the environment to the correct Diamond path and “cd” to the directory where the NCD file exists. </div><div id="ww1056431" class="Indented">The following three environment variables have to be set properly for PAR to run: PATH, FOUNDRY, and LD_LIBRARY_PATH. To set the environment variables, see <a href="../../Reference%20Guides/Command%20Line/Setting_Up_the_Environment_to_Run_Command_Line.htm#ww1001473" title="Setting Up the Environment to Run Command Line">Setting Up the Environment to Run Command Line</a>. You can test if the remote environment is set up correctly by running the following command locally:</div><div id="ww1055870" class="Indented">ssh &lt;<span style="font-style: italic">remote_machine</span>&gt; par</div><div id="ww1056524" class="Indented">You will see the PAR help page if the environment setup is correct.</div><div id="ww1056525" class="Bulleted"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span>Use Env and Workdir node description lines in the node list file. </div><div id="ww1109184" class="Indented">The PAR Multi-tasking option will know which script to run and in which working directory to run the par command after it reads the node list. The spawned task on the remote machine will run the “Env” file, then it will “cd” to the working directory before it runs PAR. </div><div class="ww_skin_page_overflow"><table class="NoteIndented" cellspacing="0" summary=""><caption class="NoteTitleIndented" style="caption-side: top"><div id="ww1109214" class="NoteTitleIndented">Note</div></caption><tr><td style="background-color: White; border-bottom-color: #E5E5E5; border-bottom-style: none; border-bottom-width: 1px; border-left-style: none; border-right-color: #E5E5E5; border-right-style: none; border-right-width: 0px; border-top-color: #E5E5E5; border-top-style: none; border-top-width: 1.0pt; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 4px; vertical-align: top"><div id="ww1109216" class="CellBody"><span></span>The result of MAP (_map.ncd) must be in a directory location in which every ssh to every nodename has access.</div></td></tr></table></div><p id="ww1109186" class="Body"><span></span>There is also UNIX/Linux environment setup information for this feature in the <span class="Hyperlink"><a href="../../Reference%20Guides/Command%20Line/running_par_from_the_command_line_1.htm#ww1168704" title="Running PAR from the Command Line">Using the PAR Multi-Tasking (-m) Option</a></span> section of the topic <span class="Hyperlink"><a href="../../Reference%20Guides/Command%20Line/running_par_from_the_command_line_1.htm#ww1168216" title="Running PAR from the Command Line">Running PAR from the Command Line</a></span>. </p><h5 id="ww1056465" class="HeadingRunIn"><span></span>Running Multiple PAR Jobs in Parallel in Diamond</h5><p id="ww1075099" class="Body"><span></span>When running the multi-tasking option on the PC, you should use a dual processor or multiple processor configuration, or the feature will provide no benefit. Currently, you cannot run the multi-tasking option using multiple networked PCs. </p><h5 id="ww1052001" class="StepIntro"><span></span>To run the PAR Multi-tasking on the PC with multiple processors: </h5><div id="ww1052002" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>1.	</span></span>Prepare a node list ASCII text file that identifies your machine (lpass4), system type (PC), and number of core processors (2). Include any desired comment lines.</div><pre id="ww1052216" class="CodeIndented">// This file contains a profile node listing for a multipar<br />// PC job. </pre><pre id="ww1052224" class="CodeIndented">[lpass4]</pre><pre id="ww1052012" class="CodeIndented">SYSTEM = PC </pre><pre id="ww1052013" class="CodeIndented">CORENUM = 2</pre><pre id="ww1089925" class="CodeIndented">&nbsp;</pre><div id="ww1052271" class="Indented">You must use the format above for the node list file and fill in all required parameters. Parameters are case insensitive. The node or machine names are given in square brackets on a single line. </div><div id="ww1052272" class="Indented">The System parameter can take the Solaris, Linux, or PC values, depending upon your platform. However, the PC value cannot be used with either Solaris or Linux because it is not possible to create a multiple computer farm with PCs. Corenum refers to the number of CPU cores or processors available on that single PC. Setting it to zero will disable the node from being used. Setting it to a greater number than the actual number of CPUs will cause PAR to run jobs on the same CPU, lengthening the run time. No further parameters are necessary on the PC. </div><div id="ww1052014" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>2.	</span></span>Save your node list file and copy it to your top-level project directory. In our example, we named the node list my_nodelist.txt.</div><div id="ww1052015" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>3.	</span></span>In Diamond, click <span style="font-weight: bold">Project &gt; Active Strategy &gt; Place and Route Settings</span>. </div><div id="ww1052017" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>4.	</span></span>Double click the <span style="font-weight: bold">Value</span> cell for the <span style="font-weight: bold">Multi-Tasking Node List</span> option and click the browse button. </div><div id="ww1084448" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>5.	</span></span>Navigate to the file name in your project directory. If the file is located somewhere else, you must use an absolute file and path name, for example, <span style="font-style: italic">C:/my_projects/my_nodelist.txt</span>. PAR will issue an error message if it cannot find your node list file, for example:</div><pre id="ww1052020" class="CodeIndented">ERROR - par: Node name file  does not exist. </pre><pre id="ww1089926" class="CodeIndented">&nbsp;</pre><div id="ww1052021" class="Indented">If it cannot find your node list, PAR will continue in a serial fashion without using the node list file to specify the use of multiple processors. </div><div id="ww1063634" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>6.	</span></span>Click <span style="font-weight: bold">OK</span>. </div><div id="ww1121836" class="Indented">In our example, we opted to change the number of placement iterations to 3, the placement iteration starting point to 3, and limit the number of best saved runs to 2. </div><div id="ww1121843" class="Numbered"><span class="WebWorks_Number" style="width: 16.56pt"><span>7.	</span></span>In the Process view in the Diamond environment, right click <span class="GUI">Place &amp; Route Design</span> and choose <span class="GUI">Run</span> from the pop-up menu to run the flow through the Place &amp; Route process.</div><div id="ww1073757" class="Indented">Rerun will run just the one process over again and nothing else. Rerun All<span class="GUI"> </span>will rerun the design flow up to the place and route process if selected. </div><div id="ww1052024" class="Indented">In the Output view or Automake Log, the multipar run will show that it ran all jobs and completed successfully. </div><pre id="ww1052025" class="CodeIndented">---- Multipar Tool ---- </pre><pre id="ww1052026" class="CodeIndented">Running par. Please wait . . .</pre><pre id="ww1052027" class="CodeIndented">Starting job 5_3 on node lpass4</pre><pre id="ww1052028" class="CodeIndented">Starting job 5_4 on node lpass4</pre><pre id="ww1052029" class="CodeIndented">Finished job 5_4 on node lpass4</pre><pre id="ww1052030" class="CodeIndented">Starting job 5_5 on node lpass4</pre><pre id="ww1052031" class="CodeIndented">Finished job 5_3 on node lpass4</pre><pre id="ww1052032" class="CodeIndented">Finished job 5_5 on node lpass4</pre><pre id="ww1052033" class="CodeIndented">Exiting par with exit code 0</pre><pre id="ww1052034" class="CodeIndented">Exiting multipar with exit code 0</pre><pre id="ww1052035" class="CodeIndented">Done: completed successfully.</pre><pre id="ww1089927" class="CodeIndented">&nbsp;</pre><div id="ww1052036" class="Indented">Notice that we chose the starting point of 3, so the jobs start at 5_3 instead of 5_1. </div><div id="ww1052037" class="Indented">After the run, PAR creates a &lt;project_name&gt;.dir directory in your top-level project directory with the respective NCD design files along with their .par and .pad report files. The following are example directory contents: </div><pre id="ww1052038" class="CodeIndented">my_project.dir:</pre><pre id="ww1052039" class="CodeIndented">5_3.ncd        5_3.par        5_4.pad        test_view.par</pre><pre id="ww1052040" class="CodeIndented">5_3.pad        5_4.ncd        5_4.par</pre><pre id="ww1089928" class="CodeIndented">&nbsp;</pre><div id="ww1051988" class="Indented">In this example output directory only the best two runs were saved, as specified. Because the start point was the third iteration, it starts with 5_3. The 5 represents the effort level and the 3 the number of the run. </div><p id="ww1052168" class="Body"><span></span>To learn more about how to use this feature from the command line, see the subsection <span class="Hyperlink"><a href="../../Reference%20Guides/Command%20Line/running_par_from_the_command_line_1.htm#ww1168704" title="Running PAR from the Command Line">Using the PAR Multi-Tasking (-m) Option</a></span> of the topic <span class="Hyperlink"><a href="../../Reference%20Guides/Command%20Line/running_par_from_the_command_line_1.htm#ww1168216" title="Running PAR from the Command Line">Running PAR from the Command Line</a></span>. There is also information there about general usage, environment setup, screen output, interrupting jobs, and requirements.</p><h5 id="ww1022982" class="HeadingRunIn"><span></span>See Also</h5><div id="ww1051934" class="Portal" style="vertical-align: baseline"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="../../Reference%20Guides/Command%20Line/running_par_from_the_command_line_1.htm#ww1168216" title="Running PAR from the Command Line">Running PAR from the Command Line</a></span></div><div id="ww1052124" class="Portal" style="vertical-align: baseline"><span class="WebWorks_Number" style="width: 16.56pt"><span><img src="../square.png" alt="*" border="0" width="7" height="7" /></span></span><span class="Hyperlink"><a href="../../Reference%20Guides/Command%20Line/running_par_from_the_command_line_1.htm#ww1168704" title="Running PAR from the Command Line">Using the PAR Multi-Tasking (-m) Option</a></span></div></div><div id="page_dates"><div class="ww_skin_page_publish_date"></div></div><!-- Related Topics --><!--                --><footer><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer></div></div><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript></body></html>